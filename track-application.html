<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track Your Application - Alliance Financing AI</title>
    <meta name="description" content="Track your business funding application status with Alliance Financing AI.">
    
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
nav{position:fixed;top:0;width:100%;background:rgba(255,255,255,.95);backdrop-filter:blur(12px);border-bottom:1px solid #e2e8f0;z-index:1000;padding:1.25rem 0}
.nav-container{max-width:1200px;margin:0 auto;padding:0 2rem;display:grid;grid-template-columns:auto 1fr auto;align-items:center}
.logo{display:flex;align-items:center;text-decoration:none}
.logo svg{height:32px;width:auto}
.nav-links{display:flex;gap:1.75rem;align-items:center;justify-content:center}
.nav-links a{color:#0F172A;text-decoration:none;font-size:.9375rem;font-weight:600;transition:all .2s;position:relative}
.nav-links a:hover{color:#2563EB}
.nav-links a::after{content:'';position:absolute;bottom:-4px;left:0;width:0;height:2px;background:#2563EB;transition:width .2s}
.nav-links a:hover::after{width:100%}
.nav-links a.active{color:#2563EB}
.nav-links a.active::after{width:100%}
.nav-cta{justify-self:end;display:flex;gap:1rem}
.btn-outline{background:#fff;color:#334155;border:2px solid #e2e8f0;padding:.75rem 1.5rem;border-radius:.5rem;font-weight:600;cursor:pointer;text-decoration:none;font-size:.9375rem;transition:all .2s}
.btn-outline:hover{border-color:#2563EB;color:#2563EB}
.btn-primary{background:#2563EB;color:#fff;padding:.75rem 1.5rem;border-radius:.5rem;border:none;font-weight:600;cursor:pointer;text-decoration:none;font-size:.9375rem;transition:all .2s}
.btn-primary:hover{background:#1E40AF}
.mobile-menu-btn{display:none;background:#2563EB;border:none;cursor:pointer;padding:.75rem 1.5rem;border-radius:.5rem;color:#fff;font-weight:600;font-size:.9375rem}
@media(max-width:768px){.nav-links,.nav-cta{display:none!important}.mobile-menu-btn{display:block!important}.nav-container{grid-template-columns:auto auto!important}}

        :root {
            --primary: #2563EB;
            --primary-dark: #1E40AF;
            --accent: #10B981;
            --slate-50: #F8FAFC;
            --slate-100: #F1F5F9;
            --slate-200: #E2E8F0;
            --slate-400: #94A3B8;
            --slate-500: #64748B;
            --slate-600: #475569;
            --slate-700: #334155;
            --slate-800: #1E293B;
            --slate-900: #0F172A;
            --white: #FFFFFF;
            --font-sans: 'DM Sans', -apple-system, sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font-sans);
            color: var(--slate-800);
            line-height: 1.6;
            background: var(--white);
        }

        .hero {
            padding: 8rem 2rem 4rem;
            background: linear-gradient(135deg, #EEF2FF, #F5F3FF);
            text-align: center;
        }
        .hero h1 {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 700; color: var(--slate-900); margin-bottom: 1rem;
        }
        .hero p {
            font-size: 1.125rem; color: var(--slate-600);
            max-width: 600px; margin: 0 auto;
        }

        .container {
            max-width: 700px; margin: 0 auto; padding: 3rem 2rem;
        }

        /* Lookup Form */
        .lookup-card {
            background: var(--white); border: 2px solid var(--slate-200);
            border-radius: 1rem; padding: 2.5rem;
        }
        .lookup-card h2 {
            font-size: 1.5rem; color: var(--slate-900); margin-bottom: 1.5rem;
        }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label {
            display: block; font-weight: 600; color: var(--slate-900);
            margin-bottom: .5rem; font-size: .9375rem;
        }
        .form-group input {
            width: 100%; padding: .875rem;
            border: 2px solid var(--slate-200); border-radius: .5rem;
            font-family: var(--font-sans); font-size: 1rem; transition: all .2s;
        }
        .form-group input:focus { outline: none; border-color: var(--primary); }
        .form-group .hint {
            font-size: .8125rem; color: var(--slate-500); margin-top: .375rem;
        }
        .btn-track {
            background: var(--primary); color: var(--white);
            padding: 1rem 2rem; border-radius: .5rem; border: none;
            font-weight: 600; cursor: pointer; font-size: 1rem;
            width: 100%; transition: all .2s;
        }
        .btn-track:hover { background: var(--primary-dark); transform: translateY(-1px); }
        .btn-track:disabled { opacity: .6; cursor: not-allowed; transform: none; }

        /* Error Message */
        .error-msg {
            background: #FEF2F2; border: 2px solid #FECACA; border-radius: .75rem;
            padding: 1rem 1.25rem; margin-top: 1.5rem; display: none;
            color: #991B1B; font-size: .9375rem; text-align: center;
        }

        /* Status Result */
        .status-card {
            display: none; background: var(--white);
            border: 2px solid var(--slate-200); border-radius: 1rem;
            padding: 2.5rem; margin-top: 0;
        }
        .status-header {
            display: flex; align-items: center; gap: 1.25rem;
            padding-bottom: 1.5rem; border-bottom: 1px solid var(--slate-200);
            margin-bottom: 2rem;
        }
        .status-icon {
            width: 56px; height: 56px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; flex-shrink: 0;
        }
        .status-icon.green { background: #ECFDF5; }
        .status-icon.blue { background: #EFF6FF; }
        .status-icon.yellow { background: #FFFBEB; }
        .status-icon.red { background: #FEF2F2; }
        .status-header h2 { font-size: 1.25rem; color: var(--slate-900); }
        .status-header p { font-size: .875rem; color: var(--slate-500); margin-top: .25rem; }

        /* Timeline */
        .timeline { position: relative; padding-left: 2rem; }
        .timeline::before {
            content: ''; position: absolute; left: 11px; top: 4px; bottom: 4px;
            width: 2px; background: var(--slate-200);
        }
        .timeline-step {
            position: relative; padding-bottom: 2rem;
        }
        .timeline-step:last-child { padding-bottom: 0; }
        .timeline-dot {
            position: absolute; left: -2rem; top: 2px;
            width: 24px; height: 24px; border-radius: 50%;
            border: 2px solid var(--slate-300); background: var(--white);
            display: flex; align-items: center; justify-content: center;
            font-size: .75rem; z-index: 1;
        }
        .timeline-step.completed .timeline-dot {
            background: var(--accent); border-color: var(--accent); color: white;
        }
        .timeline-step.active .timeline-dot {
            background: var(--primary); border-color: var(--primary); color: white;
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.2);
        }
        .timeline-step h3 {
            font-size: 1rem; color: var(--slate-900); margin-bottom: .25rem;
        }
        .timeline-step p {
            font-size: .875rem; color: var(--slate-500);
        }
        .timeline-step.inactive h3 { color: var(--slate-400); }
        .timeline-step.inactive p { color: var(--slate-400); }

        /* Actions */
        .actions {
            margin-top: 2rem; padding-top: 1.5rem;
            border-top: 1px solid var(--slate-200);
            display: flex; gap: 1rem; flex-wrap: wrap;
        }
        .btn-secondary {
            background: var(--slate-100); color: var(--slate-700);
            padding: .75rem 1.5rem; border-radius: .5rem; border: none;
            font-weight: 600; cursor: pointer; font-size: .9375rem;
            text-decoration: none; transition: all .2s;
        }
        .btn-secondary:hover { background: var(--slate-200); }

        /* Help Section */
        .help-section {
            background: var(--slate-50); border-radius: 1rem;
            padding: 2rem; margin-top: 2rem; text-align: center;
        }
        .help-section h3 {
            font-size: 1.125rem; color: var(--slate-900); margin-bottom: .75rem;
        }
        .help-section p {
            font-size: .9375rem; color: var(--slate-600); margin-bottom: .5rem;
        }
        .help-section a {
            color: var(--primary); text-decoration: none; font-weight: 600;
        }
        .help-section a:hover { text-decoration: underline; }

        @media (max-width: 768px) {
            .hero { padding: 6rem 1.5rem 3rem; }
            .lookup-card, .status-card { padding: 1.5rem; }
            .status-header { flex-direction: column; text-align: center; }
            .actions { flex-direction: column; }
        }
    </style>
</head>
<body>
        <nav>
        <div class="nav-container">
            <a href="index.html" class="logo"><svg width="200" height="32" viewBox="0 0 200 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="aiGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#2563EB"/>
                        <stop offset="100%" style="stop-color:#10B981"/>
                    </linearGradient>
                </defs>
                <text x="0" y="22" font-family="system-ui, -apple-system, 'Segoe UI', sans-serif" font-size="18" font-weight="700" fill="#0F172A" letter-spacing="-0.02em">Alliance Financing</text>
                <rect x="166" y="6" width="32" height="20" rx="5" fill="url(#aiGrad)"/>
                <text x="182" y="21" font-family="system-ui, -apple-system, 'Segoe UI', sans-serif" font-size="12" font-weight="700" fill="white" text-anchor="middle">AI</text>
            </svg></a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="how-it-works.html">How It Works</a>
                <a href="products.html">Products</a>
                <a href="partners.html">Partners</a>
                <a href="blog.html">Insights</a>
                <a href="track-application.html" class="active">Track Application</a>
            </div>
            <div class="nav-cta">
                <a href="contact.html" class="btn-outline">Contact Us</a>
                <a href="application.html" class="btn-primary">Apply Now</a>
            </div>
            <button class="mobile-menu-btn" onclick="window.location.href='application.html'">Apply Now</button>
        </div>
    </nav>

    <section class="hero">
        <h1>Track Your Application</h1>
        <p>Enter your Application ID and email address to check the status of your funding application.</p>
    </section>

    <div class="container">
        <!-- Lookup Form -->
        <div id="lookupCard" class="lookup-card">
            <h2>Check Your Status</h2>
            <form id="trackForm" onsubmit="lookupApplication(event)">
                <div class="form-group">
                    <label for="appId">Application ID *</label>
                    <input type="text" id="appId" placeholder="AF-10042" required>
                    <p class="hint">Found in your confirmation email from Alliance Financing AI</p>
                </div>
                <div class="form-group">
                    <label for="email">Email Address *</label>
                    <input type="email" id="email" placeholder="you@company.com" required>
                    <p class="hint">The email you used when applying</p>
                </div>
                <button type="submit" class="btn-track" id="trackBtn">Check Status</button>
            </form>
            <div id="errorMsg" class="error-msg"></div>
        </div>

        <!-- Status Result -->
        <div id="statusCard" class="status-card">
            <div class="status-header">
                <div class="status-icon" id="statusIcon">ðŸ“‹</div>
                <div>
                    <h2 id="statusTitle">Application Received</h2>
                    <p id="statusSubtitle">Application ID: AF-10042</p>
                </div>
            </div>

            <div class="timeline" id="timeline">
                <!-- Steps get populated by JavaScript -->
            </div>

            <div class="actions">
                <button class="btn-secondary" onclick="checkAnother()">Check Another Application</button>
                <a href="contact.html" class="btn-secondary">Contact Us</a>
                <a href="index.html" class="btn-secondary">Return Home</a>
            </div>
        </div>

        <div class="help-section">
            <h3>Need Help?</h3>
            <p>Can't find your Application ID? Check your email for a confirmation from Alliance Financing AI.</p>
            <p>Still having trouble? <a href="contact.html">Contact our team</a> or call <a href="tel:+18006603660">1-800-660-3660 ext. 222</a></p>
        </div>
    </div>

    <script>
        var WEB_APP_URL = "https://script.google.com/macros/s/AKfycbycE5K8lz-22XzfTTnASmnkUo5moMV7R3Z5kVQRbiYO7Mc8NllTRvrwFza5fjuf7lSxGQ/exec";

        var STATUSES = [
            { key: "Application Received", icon: "ðŸ“‹", label: "Application Received", desc: "Your application has been submitted and is being processed." },
            { key: "Under Review", icon: "ðŸ”", label: "Under Review", desc: "Our team is reviewing your application details." },
            { key: "Matched with Lenders", icon: "ðŸ¤", label: "Matched with Lenders", desc: "Your application has been matched with suitable lenders." },
            { key: "Approved", icon: "âœ…", label: "Approved", desc: "Congratulations! Your application has been approved." },
            { key: "Documents Out for Signing", icon: "ðŸ“", label: "Documents Out for Signing", desc: "Your funding documents have been sent for your signature." },
            { key: "Documents Completed", icon: "ðŸ“„", label: "Documents Completed", desc: "All documents have been signed and returned." },
            { key: "In Funding", icon: "â³", label: "In Funding", desc: "Your funding is being processed and will be disbursed shortly." },
            { key: "Funded", icon: "ðŸ’°", label: "Funded", desc: "Your funds have been disbursed. Congratulations!" },
            { key: "Declined", icon: "âŒ", label: "Declined", desc: "Unfortunately, we were unable to approve your application at this time." }
        ];

        function lookupApplication(event) {
            event.preventDefault();

            var appId = document.getElementById('appId').value.trim();
            var email = document.getElementById('email').value.trim();
            var btn = document.getElementById('trackBtn');
            var errorMsg = document.getElementById('errorMsg');

            if (!appId || !email) {
                errorMsg.textContent = "Please enter both your Application ID and email address.";
                errorMsg.style.display = "block";
                return;
            }

            // Loading state
            btn.textContent = "Looking up...";
            btn.disabled = true;
            errorMsg.style.display = "none";

            var url = WEB_APP_URL + "?appId=" + encodeURIComponent(appId) + "&email=" + encodeURIComponent(email);

            fetch(url)
                .then(function(response) { return response.json(); })
                .then(function(result) {
                    btn.textContent = "Check Status";
                    btn.disabled = false;

                    if (result.success) {
                        showStatus(result);
                    } else {
                        errorMsg.textContent = result.error || "Application not found. Please check your details.";
                        errorMsg.style.display = "block";
                    }
                })
                .catch(function(err) {
                    btn.textContent = "Check Status";
                    btn.disabled = false;
                    errorMsg.textContent = "Unable to connect. Please try again or contact us at 1-800-660-3660 ext. 222.";
                    errorMsg.style.display = "block";
                });
        }

        function showStatus(data) {
            document.getElementById('lookupCard').style.display = 'none';
            document.getElementById('statusCard').style.display = 'block';

            var currentStatus = data.status || "Application Received";
            var currentIndex = STATUSES.findIndex(function(s) { return s.key === currentStatus; });
            if (currentIndex === -1) currentIndex = 0;

            // Handle Declined separately
            var isDeclined = currentStatus === "Declined";

            // Set header
            var statusObj = STATUSES[currentIndex];
            document.getElementById('statusTitle').textContent = statusObj.label;
            document.getElementById('statusSubtitle').textContent = "Application ID: " + data.appId + (data.name ? " â€¢ " + data.name : "");

            var iconEl = document.getElementById('statusIcon');
            iconEl.textContent = statusObj.icon;
            if (isDeclined) {
                iconEl.className = "status-icon red";
            } else if (currentIndex >= 7) {
                iconEl.className = "status-icon green";
            } else if (currentIndex >= 3) {
                iconEl.className = "status-icon blue";
            } else {
                iconEl.className = "status-icon yellow";
            }

            // Build timeline (exclude Declined from timeline)
            var timelineEl = document.getElementById('timeline');
            timelineEl.innerHTML = '';

            var displayStatuses = STATUSES.filter(function(s) { return s.key !== "Declined"; });

            if (isDeclined) {
                // Show declined message instead of timeline
                timelineEl.innerHTML = '<div style="background:#FEF2F2;border-radius:.75rem;padding:1.5rem;text-align:center">' +
                    '<p style="color:#991B1B;font-size:1rem">Unfortunately, we were unable to approve your application at this time. ' +
                    'Please <a href="contact.html" style="color:#991B1B;font-weight:600">contact us</a> to discuss alternative options.</p></div>';
            } else {
                for (var i = 0; i < displayStatuses.length; i++) {
                    var step = document.createElement('div');
                    step.className = 'timeline-step';

                    if (i < currentIndex) {
                        step.className += ' completed';
                    } else if (i === currentIndex) {
                        step.className += ' active';
                    } else {
                        step.className += ' inactive';
                    }

                    step.innerHTML = '<div class="timeline-dot">' + (i < currentIndex ? 'âœ“' : (i === currentIndex ? 'â—' : '')) + '</div>' +
                        '<h3>' + displayStatuses[i].label + '</h3>' +
                        '<p>' + (i <= currentIndex ? displayStatuses[i].desc : '') + '</p>';

                    timelineEl.appendChild(step);
                }
            }
        }

        function checkAnother() {
            document.getElementById('lookupCard').style.display = 'block';
            document.getElementById('statusCard').style.display = 'none';
            document.getElementById('appId').value = '';
            document.getElementById('email').value = '';
            document.getElementById('errorMsg').style.display = 'none';
        }

        // Auto-lookup if coming from thank-you page
        window.addEventListener('DOMContentLoaded', function() {
            var params = new URLSearchParams(window.location.search);
            if (params.get('appId') && params.get('email')) {
                document.getElementById('appId').value = params.get('appId');
                document.getElementById('email').value = params.get('email');
                lookupApplication(new Event('submit'));
            }
        });
    </script>
</body>
</html>
